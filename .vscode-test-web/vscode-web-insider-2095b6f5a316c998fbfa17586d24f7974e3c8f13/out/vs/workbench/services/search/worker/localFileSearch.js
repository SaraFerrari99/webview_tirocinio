/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/(function(){var ce=["require","exports","vs/base/common/platform","vs/base/common/path","vs/base/common/strings","vs/base/common/extpath","vs/base/common/uri","vs/base/common/resources","vs/base/common/async","vs/base/common/glob","vs/base/common/symbols","vs/base/common/network","vs/base/common/errors","vs/base/common/cancellation","vs/workbench/services/search/common/getFileResults","vs/workbench/services/search/common/ignoreFile","vs/base/common/types","vs/base/common/event","vs/base/common/lifecycle","vs/base/common/arrays","vs/base/common/map","vs/editor/common/core/range","vs/workbench/services/search/worker/localFileSearch"],le=function(te){for(var e=[],C=0,O=te.length;C<O;C++)e[C]=ce[te[C]];return e};define(ce[10],le([0,1]),function(te,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Nd=void 0,e.$Nd=Symbol("MicrotaskDelay")}),define(ce[5],le([0,1,3,2,4,16]),function(te,e,C,O,A,w){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$9f=e.$8f=e.$7f=e.$6f=e.$5f=e.$4f=e.$3f=e.$2f=e.$1f=e.$Zf=e.$Yf=e.$Xf=e.$Wf=e.$Vf=e.$Uf=e.$Tf=void 0;function b(s){return s===47||s===92}e.$Tf=b;function E(s){return s.replace(/[\\/]/g,C.$fc.sep)}e.$Uf=E;function S(s){return s.indexOf("/")===-1&&(s=E(s)),/^[a-zA-Z]:(\/|$)/.test(s)&&(s="/"+s),s}e.$Vf=S;function m(s,h=C.$fc.sep){if(!s)return"";const k=s.length,F=s.charCodeAt(0);if(b(F)){if(b(s.charCodeAt(1))&&!b(s.charCodeAt(2))){let q=3;const G=q;for(;q<k&&!b(s.charCodeAt(q));q++);if(G!==q&&!b(s.charCodeAt(q+1))){for(q+=1;q<k;q++)if(b(s.charCodeAt(q)))return s.slice(0,q+1).replace(/[\\/]/g,h)}}return h}else if(B(F)&&s.charCodeAt(1)===58)return b(s.charCodeAt(2))?s.slice(0,2)+h:s.slice(0,2);let H=s.indexOf("://");if(H!==-1){for(H+=3;H<k;H++)if(b(s.charCodeAt(H)))return s.slice(0,H+1)}return""}e.$Wf=m;function $(s){if(!O.$i||!s||s.length<5)return!1;let h=s.charCodeAt(0);if(h!==92||(h=s.charCodeAt(1),h!==92))return!1;let k=2;const F=k;for(;k<s.length&&(h=s.charCodeAt(k),h!==92);k++);return!(F===k||(h=s.charCodeAt(k+1),isNaN(h)||h===92))}e.$Xf=$;const L=/[\\/:\*\?"<>\|]/g,Z=/[\\/]/g,D=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function i(s,h=O.$i){const k=h?L:Z;return!(!s||s.length===0||/^\s+$/.test(s)||(k.lastIndex=0,k.test(s))||h&&D.test(s)||s==="."||s===".."||h&&s[s.length-1]==="."||h&&s.length!==s.trim().length||s.length>255)}e.$Yf=i;function u(s,h,k){const F=s===h;return!k||F?F:!s||!h?!1:(0,A.$5e)(s,h)}e.$Zf=u;function g(s,h,k,F=C.sep){if(s===h)return!0;if(!s||!h||h.length>s.length)return!1;if(k){if(!(0,A.$6e)(s,h))return!1;if(h.length===s.length)return!0;let q=h.length;return h.charAt(h.length-1)===F&&q--,s.charAt(q)===F}return h.charAt(h.length-1)!==F&&(h+=F),s.indexOf(h)===0}e.$1f=g;function B(s){return s>=65&&s<=90||s>=97&&s<=122}e.$2f=B;function V(s,h){return O.$i&&s.endsWith(":")&&(s+=C.sep),(0,C.$hc)(s)||(s=(0,C.$ic)(h,s)),s=(0,C.$gc)(s),O.$i?(s=(0,A.$Ne)(s,C.sep),s.endsWith(":")&&(s+=C.sep)):(s=(0,A.$Ne)(s,C.sep),s||(s=C.sep)),s}e.$3f=V;function P(s){const h=(0,C.$gc)(s);return O.$i?s.length>3?!1:K(h)&&(s.length===2||h.charCodeAt(2)===92):h===C.$fc.sep}e.$4f=P;function K(s,h=O.$i){return h?B(s.charCodeAt(0))&&s.charCodeAt(1)===58:!1}e.$5f=K;function ee(s,h=O.$i){return K(s,h)?s[0]:void 0}e.$6f=ee;function R(s,h,k){return h.length>s.length?-1:s===h?0:(k&&(s=s.toLowerCase(),h=h.toLowerCase()),s.indexOf(h))}e.$7f=R;function U(s){const h=s.split(":");let k,F,H;for(const q of h){const G=Number(q);(0,w.$Ff)(G)?F===void 0?F=G:H===void 0&&(H=G):k=k?[k,q].join(":"):q}if(!k)throw new Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:k,line:F!==void 0?F:void 0,column:H!==void 0?H:F!==void 0?1:void 0}}e.$8f=U;const I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",X="BDEFGHIJKMOQRSTUVWXYZbdefghijkmoqrstuvwxyz0123456789";function J(s,h,k=8){let F="";for(let q=0;q<k;q++){let G;q===0&&O.$i&&!h&&(k===3||k===4)?G=X:G=I,F+=G.charAt(Math.floor(Math.random()*G.length))}let H;return h?H=`${h}-${F}`:H=F,s?(0,C.$ic)(s,H):H}e.$9f=J}),define(ce[11],le([0,1,12,2,6]),function(te,e,C,O,A){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.COI=e.$fg=e.$eg=e.$dg=e.$cg=e.$bg=e.$ag=e.$_f=e.$$f=e.$0f=e.Schemas=void 0;var w;(function(m){m.inMemory="inmemory",m.vscode="vscode",m.internal="private",m.walkThrough="walkThrough",m.walkThroughSnippet="walkThroughSnippet",m.http="http",m.https="https",m.file="file",m.mailto="mailto",m.untitled="untitled",m.data="data",m.command="command",m.vscodeRemote="vscode-remote",m.vscodeRemoteResource="vscode-remote-resource",m.vscodeManagedRemoteResource="vscode-managed-remote-resource",m.vscodeUserData="vscode-userdata",m.vscodeCustomEditor="vscode-custom-editor",m.vscodeNotebookCell="vscode-notebook-cell",m.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",m.vscodeNotebookCellOutput="vscode-notebook-cell-output",m.vscodeInteractiveInput="vscode-interactive-input",m.vscodeSettings="vscode-settings",m.vscodeWorkspaceTrust="vscode-workspace-trust",m.vscodeTerminal="vscode-terminal",m.vscodeChatSesssion="vscode-chat-editor",m.webviewPanel="webview-panel",m.vscodeWebview="vscode-webview",m.extension="extension",m.vscodeFileResource="vscode-file",m.tmp="tmp",m.vsls="vsls",m.vscodeSourceControl="vscode-scm"})(w||(e.Schemas=w={})),e.$0f="vscode-tkn",e.$$f="tkn";class b{constructor(){this.a=Object.create(null),this.b=Object.create(null),this.c=Object.create(null),this.d="http",this.e=null,this.f=`/${w.vscodeRemoteResource}`}setPreferredWebSchema($){this.d=$}setDelegate($){this.e=$}setServerRootPath($){this.f=`${$}/${w.vscodeRemoteResource}`}set($,L,Z){this.a[$]=L,this.b[$]=Z}setConnectionToken($,L){this.c[$]=L}getPreferredWebSchema(){return this.d}rewrite($){if(this.e)try{return this.e($)}catch(g){return C.$Z(g),$}const L=$.authority;let Z=this.a[L];Z&&Z.indexOf(":")!==-1&&Z.indexOf("[")===-1&&(Z=`[${Z}]`);const D=this.b[L],i=this.c[L];let u=`path=${encodeURIComponent($.path)}`;return typeof i=="string"&&(u+=`&${e.$$f}=${encodeURIComponent(i)}`),A.URI.from({scheme:O.$o?this.d:w.vscodeRemoteResource,authority:`${Z}:${D}`,path:this.f,query:u})}}e.$_f=new b,e.$ag="vs/../../extensions",e.$bg="vs/../../node_modules",e.$cg="vs/../../node_modules.asar",e.$dg="vs/../../node_modules.asar.unpacked",e.$eg="vscode-app";class E{static{this.a=e.$eg}asBrowserUri($){const L=this.b($,te);return this.uriToBrowserUri(L)}uriToBrowserUri($){return $.scheme===w.vscodeRemote?e.$_f.rewrite($):$.scheme===w.file&&(O.$m||O.$q===`${w.vscodeFileResource}://${E.a}`)?$.with({scheme:w.vscodeFileResource,authority:$.authority||E.a,query:null,fragment:null}):$}asFileUri($){const L=this.b($,te);return this.uriToFileUri(L)}uriToFileUri($){return $.scheme===w.vscodeFileResource?$.with({scheme:w.file,authority:$.authority!==E.a?$.authority:null,query:null,fragment:null}):$}b($,L){return A.URI.isUri($)?$:A.URI.parse(L.toUrl($))}}e.$fg=new E;var S;(function(m){const $=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);m.CoopAndCoep=Object.freeze($.get("3"));const L="vscode-coi";function Z(i){let u;typeof i=="string"?u=new URL(i).searchParams:i instanceof URL?u=i.searchParams:A.URI.isUri(i)&&(u=new URL(i.toString(!0)).searchParams);const g=u?.get(L);if(g)return $.get(g)}m.getHeadersFromQuery=Z;function D(i,u,g){if(!globalThis.crossOriginIsolated)return;const B=u&&g?"3":g?"2":"1";i instanceof URLSearchParams?i.set(L,B):i[L]=B}m.addSearchParam=D})(S||(e.COI=S={}))}),define(ce[7],le([0,1,5,11,3,2,4,6]),function(te,e,C,O,A,w,b,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Ig=e.DataUri=e.$Hg=e.$Gg=e.$Fg=e.$Eg=e.$Dg=e.$Cg=e.$Bg=e.$Ag=e.$zg=e.$yg=e.$xg=e.$wg=e.$vg=e.$ug=e.$tg=e.$sg=e.$rg=e.$qg=e.$pg=e.$og=e.$ng=e.$mg=void 0;function S(D){return(0,E.$vc)(D,!0)}e.$mg=S;class m{constructor(i){this.a=i}compare(i,u,g=!1){return i===u?0:(0,b.$Xe)(this.getComparisonKey(i,g),this.getComparisonKey(u,g))}isEqual(i,u,g=!1){return i===u?!0:!i||!u?!1:this.getComparisonKey(i,g)===this.getComparisonKey(u,g)}getComparisonKey(i,u=!1){return i.with({path:this.a(i)?i.path.toLowerCase():void 0,fragment:u?null:void 0}).toString()}ignorePathCasing(i){return this.a(i)}isEqualOrParent(i,u,g=!1){if(i.scheme===u.scheme){if(i.scheme===O.Schemas.file)return C.$1f(S(i),S(u),this.a(i))&&i.query===u.query&&(g||i.fragment===u.fragment);if((0,e.$Dg)(i.authority,u.authority))return C.$1f(i.path,u.path,this.a(i),"/")&&i.query===u.query&&(g||i.fragment===u.fragment)}return!1}joinPath(i,...u){return E.URI.joinPath(i,...u)}basenameOrAuthority(i){return(0,e.$vg)(i)||i.authority}basename(i){return A.$fc.basename(i.path)}extname(i){return A.$fc.extname(i.path)}dirname(i){if(i.path.length===0)return i;let u;return i.scheme===O.Schemas.file?u=E.URI.file(A.$lc(S(i))).path:(u=A.$fc.dirname(i.path),i.authority&&u.length&&u.charCodeAt(0)!==47&&(console.error(`dirname("${i.toString})) resulted in a relative path`),u="/")),i.with({path:u})}normalizePath(i){if(!i.path.length)return i;let u;return i.scheme===O.Schemas.file?u=E.URI.file(A.$gc(S(i))).path:u=A.$fc.normalize(i.path),i.with({path:u})}relativePath(i,u){if(i.scheme!==u.scheme||!(0,e.$Dg)(i.authority,u.authority))return;if(i.scheme===O.Schemas.file){const V=A.$kc(S(i),S(u));return w.$i?C.$Uf(V):V}let g=i.path||"/";const B=u.path||"/";if(this.a(i)){let V=0;for(const P=Math.min(g.length,B.length);V<P&&!(g.charCodeAt(V)!==B.charCodeAt(V)&&g.charAt(V).toLowerCase()!==B.charAt(V).toLowerCase());V++);g=B.substr(0,V)+g.substr(V)}return A.$fc.relative(g,B)}resolvePath(i,u){if(i.scheme===O.Schemas.file){const g=E.URI.file(A.$jc(S(i),u));return i.with({authority:g.authority,path:g.path})}return u=C.$Vf(u),i.with({path:A.$fc.resolve(i.path,u)})}isAbsolutePath(i){return!!i.path&&i.path[0]==="/"}isEqualAuthority(i,u){return i===u||i!==void 0&&u!==void 0&&(0,b.$5e)(i,u)}hasTrailingPathSeparator(i,u=A.sep){if(i.scheme===O.Schemas.file){const g=S(i);return g.length>C.$Wf(g).length&&g[g.length-1]===u}else{const g=i.path;return g.length>1&&g.charCodeAt(g.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(i.fsPath)}}removeTrailingPathSeparator(i,u=A.sep){return(0,e.$Eg)(i,u)?i.with({path:i.path.substr(0,i.path.length-1)}):i}addTrailingPathSeparator(i,u=A.sep){let g=!1;if(i.scheme===O.Schemas.file){const B=S(i);g=B!==void 0&&B.length===C.$Wf(B).length&&B[B.length-1]===u}else{u="/";const B=i.path;g=B.length===1&&B.charCodeAt(B.length-1)===47}return!g&&!(0,e.$Eg)(i,u)?i.with({path:i.path+"/"}):i}}e.$ng=m,e.$og=new m(()=>!1),e.$pg=new m(D=>D.scheme===O.Schemas.file?!w.$k:!0),e.$qg=new m(D=>!0),e.$rg=e.$og.isEqual.bind(e.$og),e.$sg=e.$og.isEqualOrParent.bind(e.$og),e.$tg=e.$og.getComparisonKey.bind(e.$og),e.$ug=e.$og.basenameOrAuthority.bind(e.$og),e.$vg=e.$og.basename.bind(e.$og),e.$wg=e.$og.extname.bind(e.$og),e.$xg=e.$og.dirname.bind(e.$og),e.$yg=e.$og.joinPath.bind(e.$og),e.$zg=e.$og.normalizePath.bind(e.$og),e.$Ag=e.$og.relativePath.bind(e.$og),e.$Bg=e.$og.resolvePath.bind(e.$og),e.$Cg=e.$og.isAbsolutePath.bind(e.$og),e.$Dg=e.$og.isEqualAuthority.bind(e.$og),e.$Eg=e.$og.hasTrailingPathSeparator.bind(e.$og),e.$Fg=e.$og.removeTrailingPathSeparator.bind(e.$og),e.$Gg=e.$og.addTrailingPathSeparator.bind(e.$og);function $(D,i){const u=[];for(let g=0;g<D.length;g++){const B=i(D[g]);D.some((V,P)=>P===g?!1:(0,e.$sg)(B,i(V)))||u.push(D[g])}return u}e.$Hg=$;var L;(function(D){D.META_DATA_LABEL="label",D.META_DATA_DESCRIPTION="description",D.META_DATA_SIZE="size",D.META_DATA_MIME="mime";function i(u){const g=new Map;u.path.substring(u.path.indexOf(";")+1,u.path.lastIndexOf(";")).split(";").forEach(P=>{const[K,ee]=P.split(":");K&&ee&&g.set(K,ee)});const V=u.path.substring(0,u.path.indexOf(";"));return V&&g.set(D.META_DATA_MIME,V),g}D.parseMetaData=i})(L||(e.DataUri=L={}));function Z(D,i,u){if(i){let g=D.path;return g&&g[0]!==A.$fc.sep&&(g=A.$fc.sep+g),D.with({scheme:u,authority:i,path:g})}return D.with({scheme:u})}e.$Ig=Z}),define(ce[8],le([0,1,13,12,17,18,7,2,10]),function(te,e,C,O,A,w,b,E,S){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$lh=e.$kh=e.$jh=e.$ih=e.Promises=e.$hh=e.$gh=e.$fh=e.$eh=e.$dh=e.$ch=e.$bh=e.$ah=e.$_g=e.$$g=e.$0g=e.$9g=e.$8g=e.$7g=e.$6g=e.$5g=e.$4g=e.$3g=e.$2g=e.$1g=e.$Zg=e.$Yg=e.$Xg=e.$Wg=e.$Vg=e.$Ug=e.$Tg=e.$Sg=e.$Rg=e.$Qg=e.$Pg=e.$Og=e.$Ng=e.$Mg=e.$Lg=e.$Kg=e.$Jg=void 0;function m(c){return!!c&&typeof c.then=="function"}e.$Jg=m;function $(c){const t=new C.$1d,n=c(t.token),r=new Promise((l,M)=>{const _=t.token.onCancellationRequested(()=>{_.dispose(),t.dispose(),M(new O.$4)});Promise.resolve(n).then(se=>{_.dispose(),t.dispose(),l(se)},se=>{_.dispose(),t.dispose(),M(se)})});return new class{cancel(){t.cancel()}then(l,M){return r.then(l,M)}catch(l){return this.then(void 0,l)}finally(l){return r.finally(l)}}}e.$Kg=$;function L(c,t,n){return new Promise((r,l)=>{const M=t.onCancellationRequested(()=>{M.dispose(),r(n)});c.then(r,l).finally(()=>M.dispose())})}e.$Lg=L;function Z(c,t){return new Promise((n,r)=>{const l=t.onCancellationRequested(()=>{l.dispose(),r(new O.$4)});c.then(n,r).finally(()=>l.dispose())})}e.$Mg=Z;async function D(c){let t=-1;const n=c.map((r,l)=>r.then(M=>(t=l,M)));try{return await Promise.race(n)}finally{c.forEach((r,l)=>{l!==t&&r.cancel()})}}e.$Ng=D;function i(c,t,n){let r;const l=setTimeout(()=>{r?.(void 0),n?.()},t);return Promise.race([c.finally(()=>clearTimeout(l)),new Promise(M=>r=M)])}e.$Og=i;function u(c){return new Promise((t,n)=>{const r=c();m(r)?r.then(t,n):t(r)})}e.$Pg=u;class g{constructor(){this.f=!1,this.a=null,this.b=null,this.d=null}queue(t){if(this.f)return Promise.reject(new Error("Throttler is disposed"));if(this.a){if(this.d=t,!this.b){const n=()=>{if(this.b=null,this.f)return;const r=this.queue(this.d);return this.d=null,r};this.b=new Promise(r=>{this.a.then(n,n).then(r)})}return new Promise((n,r)=>{this.b.then(n,r)})}return this.a=t(),new Promise((n,r)=>{this.a.then(l=>{this.a=null,n(l)},l=>{this.a=null,r(l)})})}dispose(){this.f=!0}}e.$Qg=g;class B{constructor(){this.a=Promise.resolve(null)}queue(t){return this.a=this.a.then(()=>t(),()=>t())}}e.$Rg=B;class V{constructor(){this.a=new Map}queue(t,n){const l=(this.a.get(t)??Promise.resolve()).catch(()=>{}).then(n).finally(()=>{this.a.get(t)===l&&this.a.delete(t)});return this.a.set(t,l),l}}e.$Sg=V;const P=(c,t)=>{let n=!0;const r=setTimeout(()=>{n=!1,t()},c);return{isTriggered:()=>n,dispose:()=>{clearTimeout(r),n=!1}}},K=c=>{let t=!0;return queueMicrotask(()=>{t&&(t=!1,c())}),{isTriggered:()=>t,dispose:()=>{t=!1}}};class ee{constructor(t){this.defaultDelay=t,this.a=null,this.b=null,this.d=null,this.f=null,this.g=null}trigger(t,n=this.defaultDelay){this.g=t,this.h(),this.b||(this.b=new Promise((l,M)=>{this.d=l,this.f=M}).then(()=>{if(this.b=null,this.d=null,this.g){const l=this.g;return this.g=null,l()}}));const r=()=>{this.a=null,this.d?.(null)};return this.a=n===S.$Nd?K(r):P(n,r),this.b}isTriggered(){return!!this.a?.isTriggered()}cancel(){this.h(),this.b&&(this.f?.(new O.$4),this.b=null)}h(){this.a?.dispose(),this.a=null}dispose(){this.cancel()}}e.$Tg=ee;class R{constructor(t){this.a=new ee(t),this.b=new g}trigger(t,n){return this.a.trigger(()=>this.b.queue(t),n)}isTriggered(){return this.a.isTriggered()}cancel(){this.a.cancel()}dispose(){this.a.dispose(),this.b.dispose()}}e.$Ug=R;class U{constructor(){this.a=!1,this.b=new Promise((t,n)=>{this.d=t})}isOpen(){return this.a}open(){this.a=!0,this.d(!0)}wait(){return this.b}}e.$Vg=U;class I extends U{constructor(t){super(),this.f=setTimeout(()=>this.open(),t)}open(){clearTimeout(this.f),super.open()}}e.$Wg=I;function X(c,t){return t?new Promise((n,r)=>{const l=setTimeout(()=>{M.dispose(),n()},c),M=t.onCancellationRequested(()=>{clearTimeout(l),M.dispose(),r(new O.$4)})}):$(n=>X(c,n))}e.$Xg=X;function J(c,t=0,n){const r=setTimeout(()=>{c(),n&&l.dispose()},t),l=(0,w.$Pc)(()=>{clearTimeout(r),n?.deleteAndLeak(l)});return n?.add(l),l}e.$Yg=J;function s(c){const t=[];let n=0;const r=c.length;function l(){return n<r?c[n++]():null}function M(_){_!=null&&t.push(_);const se=l();return se?se.then(M):Promise.resolve(t)}return Promise.resolve(null).then(M)}e.$Zg=s;function h(c,t=r=>!!r,n=null){let r=0;const l=c.length,M=()=>{if(r>=l)return Promise.resolve(n);const _=c[r++];return Promise.resolve(_()).then(ue=>t(ue)?Promise.resolve(ue):M())};return M()}e.$1g=h;function k(c,t=r=>!!r,n=null){if(c.length===0)return Promise.resolve(n);let r=c.length;const l=()=>{r=-1;for(const M of c)M.cancel?.()};return new Promise((M,_)=>{for(const se of c)se.then(ue=>{--r>=0&&t(ue)?(l(),M(ue)):r===0&&M(n)}).catch(ue=>{--r>=0&&(l(),_(ue))})})}e.$2g=k;class F{constructor(t){this.a=0,this.d=t,this.f=[],this.b=0,this.g=new A.$Qd}get onDrained(){return this.g.event}get size(){return this.a}queue(t){return this.a++,new Promise((n,r)=>{this.f.push({factory:t,c:n,e:r}),this.h()})}h(){for(;this.f.length&&this.b<this.d;){const t=this.f.shift();this.b++;const n=t.factory();n.then(t.c,t.e),n.then(()=>this.j(),()=>this.j())}}j(){this.a--,this.b--,this.f.length>0?this.h():this.g.fire()}dispose(){this.g.dispose()}}e.$3g=F;class H extends F{constructor(){super(1)}}e.$4g=H;class q{constructor(){this.a=new d,this.b=0}queue(t){return this.a.isRunning()?this.a.queue(()=>this.a.run(this.b++,t())):this.a.run(this.b++,t())}}e.$5g=q;class G{constructor(){this.a=new Map,this.b=new Set,this.d=void 0,this.f=0}async whenDrained(){if(this.g())return;const t=new v;return this.b.add(t),t.p}g(){for(const[,t]of this.a)if(t.size>0)return!1;return!0}queueFor(t,n=b.$og){const r=n.getComparisonKey(t);let l=this.a.get(r);if(!l){l=new H;const M=this.f++,_=A.Event.once(l.onDrained)(()=>{l?.dispose(),this.a.delete(r),this.h(),this.d?.deleteAndDispose(M),this.d?.size===0&&(this.d.dispose(),this.d=void 0)});this.d||(this.d=new w.$Zc),this.d.set(M,_),this.a.set(r,l)}return l}h(){this.g()&&this.j()}j(){for(const t of this.b)t.complete();this.b.clear()}dispose(){for(const[,t]of this.a)t.dispose();this.a.clear(),this.j(),this.d?.dispose()}}e.$6g=G;class re{constructor(t,n){this.a=-1,typeof t=="function"&&typeof n=="number"&&this.setIfNotSet(t,n)}dispose(){this.cancel()}cancel(){this.a!==-1&&(clearTimeout(this.a),this.a=-1)}cancelAndSet(t,n){this.cancel(),this.a=setTimeout(()=>{this.a=-1,t()},n)}setIfNotSet(t,n){this.a===-1&&(this.a=setTimeout(()=>{this.a=-1,t()},n))}}e.$7g=re;class ne{constructor(){this.d=void 0}cancel(){this.d?.dispose(),this.d=void 0}cancelAndSet(t,n,r=globalThis){this.cancel();const l=r.setInterval(()=>{t()},n);this.d=(0,w.$Pc)(()=>{r.clearInterval(l),this.d=void 0})}dispose(){this.cancel()}}e.$8g=ne;class x{constructor(t,n){this.b=-1,this.a=t,this.d=n,this.f=this.g.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearTimeout(this.b),this.b=-1)}schedule(t=this.d){this.cancel(),this.b=setTimeout(this.f,t)}get delay(){return this.d}set delay(t){this.d=t}isScheduled(){return this.b!==-1}flush(){this.isScheduled()&&(this.cancel(),this.h())}g(){this.b=-1,this.a&&this.h()}h(){this.a?.()}}e.$9g=x;class oe{constructor(t,n){n%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${n}ms is not a multiple of 1000ms.`),this.a=t,this.b=n,this.d=0,this.f=-1,this.g=this.h.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearInterval(this.f),this.f=-1)}schedule(t=this.b){t%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${t}ms is not a multiple of 1000ms.`),this.cancel(),this.d=Math.ceil(t/1e3),this.f=setInterval(this.g,1e3)}isScheduled(){return this.f!==-1}h(){this.d--,!(this.d>0)&&(clearInterval(this.f),this.f=-1,this.a?.())}}e.$0g=oe;class Q extends x{constructor(t,n){super(t,n),this.j=[]}work(t){this.j.push(t),this.isScheduled()||this.schedule()}h(){const t=this.j;this.j=[],this.a?.(t)}dispose(){this.j=[],super.dispose()}}e.$$g=Q;class p extends w.$Rc{constructor(t,n){super(),this.g=t,this.h=n,this.a=[],this.b=this.B(new w.$Sc),this.f=!1}get pending(){return this.a.length}work(t){if(this.f)return!1;if(typeof this.g.maxBufferedWork=="number"){if(this.b.value){if(this.pending+t.length>this.g.maxBufferedWork)return!1}else if(this.pending+t.length-this.g.maxWorkChunkSize>this.g.maxBufferedWork)return!1}for(const n of t)this.a.push(n);return this.b.value||this.j(),!0}j(){this.h(this.a.splice(0,this.g.maxWorkChunkSize)),this.a.length>0&&(this.b.value=new x(()=>{this.b.clear(),this.j()},this.g.throttleDelay),this.b.value.schedule())}dispose(){super.dispose(),this.f=!0}}e.$_g=p,function(){typeof globalThis.requestIdleCallback!="function"||typeof globalThis.cancelIdleCallback!="function"?e.$bh=(c,t)=>{(0,E.$B)(()=>{if(n)return;const r=Date.now()+15;t(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,r-Date.now())}}))});let n=!1;return{dispose(){n||(n=!0)}}}:e.$bh=(c,t,n)=>{const r=c.requestIdleCallback(t,typeof n=="number"?{timeout:n}:void 0);let l=!1;return{dispose(){l||(l=!0,c.cancelIdleCallback(r))}}},e.$ah=c=>(0,e.$bh)(globalThis,c)}();class Y{constructor(t,n){this.g=!1,this.d=()=>{try{this.j=n()}catch(r){this.l=r}finally{this.g=!0}},this.f=(0,e.$bh)(t,()=>this.d())}dispose(){this.f.dispose()}get value(){if(this.g||(this.f.dispose(),this.d()),this.l)throw this.l;return this.j}get isInitialized(){return this.g}}e.$ch=Y;class ie extends Y{constructor(t){super(globalThis,t)}}e.$dh=ie;async function a(c,t,n){let r;for(let l=0;l<n;l++)try{return await c()}catch(M){r=M,await X(t)}throw r}e.$eh=a;class d{isRunning(t){return typeof t=="number"?this.a?.taskId===t:!!this.a}get running(){return this.a?.promise}cancelRunning(){this.a?.cancel()}run(t,n,r){return this.a={taskId:t,cancel:()=>r?.(),promise:n},n.then(()=>this.d(t),()=>this.d(t)),n}d(t){this.a&&t===this.a.taskId&&(this.a=void 0,this.f())}f(){if(this.b){const t=this.b;this.b=void 0,t.run().then(t.promiseResolve,t.promiseReject)}}queue(t){if(this.b)this.b.run=t;else{let n,r;const l=new Promise((M,_)=>{n=M,r=_});this.b={run:t,promise:l,promiseResolve:n,promiseReject:r}}return this.b.promise}hasQueued(){return!!this.b}async join(){return this.b?.promise??this.a?.promise}}e.$fh=d;class o{constructor(t,n=()=>Date.now()){this.d=t,this.f=n,this.a=0,this.b=0}increment(){const t=this.f();return t-this.a>this.d&&(this.a=t,this.b=0),this.b++,this.b}}e.$gh=o;var y;(function(c){c[c.Resolved=0]="Resolved",c[c.Rejected=1]="Rejected"})(y||(y={}));class v{get isRejected(){return this.d?.outcome===1}get isResolved(){return this.d?.outcome===0}get isSettled(){return!!this.d}get value(){return this.d?.outcome===0?this.d?.value:void 0}constructor(){this.p=new Promise((t,n)=>{this.a=t,this.b=n})}complete(t){return new Promise(n=>{this.a(t),this.d={outcome:0,value:t},n()})}error(t){return new Promise(n=>{this.b(t),this.d={outcome:1,value:t},n()})}cancel(){return this.error(new O.$4)}}e.$hh=v;var j;(function(c){async function t(r){let l;const M=await Promise.all(r.map(_=>_.then(se=>se,se=>{l||(l=se)})));if(typeof l<"u")throw l;return M}c.settled=t;function n(r){return new Promise(async(l,M)=>{try{await r(l,M)}catch(_){M(_)}})}c.withAsyncBody=n})(j||(e.Promises=j={}));var N;(function(c){c[c.Initial=0]="Initial",c[c.DoneOK=1]="DoneOK",c[c.DoneError=2]="DoneError"})(N||(N={}));class f{static fromArray(t){return new f(n=>{n.emitMany(t)})}static fromPromise(t){return new f(async n=>{n.emitMany(await t)})}static fromPromises(t){return new f(async n=>{await Promise.all(t.map(async r=>n.emitOne(await r)))})}static merge(t){return new f(async n=>{await Promise.all(t.map(async r=>{for await(const l of r)n.emitOne(l)}))})}static{this.EMPTY=f.fromArray([])}constructor(t){this.a=0,this.b=[],this.d=null,this.f=new A.$Qd,queueMicrotask(async()=>{const n={emitOne:r=>this.g(r),emitMany:r=>this.h(r),reject:r=>this.k(r)};try{await Promise.resolve(t(n)),this.j()}catch(r){this.k(r)}finally{n.emitOne=void 0,n.emitMany=void 0,n.reject=void 0}})}[Symbol.asyncIterator](){let t=0;return{next:async()=>{do{if(this.a===2)throw this.d;if(t<this.b.length)return{done:!1,value:this.b[t++]};if(this.a===1)return{done:!0,value:void 0};await A.Event.toPromise(this.f.event)}while(!0)}}}static map(t,n){return new f(async r=>{for await(const l of t)r.emitOne(n(l))})}map(t){return f.map(this,t)}static filter(t,n){return new f(async r=>{for await(const l of t)n(l)&&r.emitOne(l)})}filter(t){return f.filter(this,t)}static coalesce(t){return f.filter(t,n=>!!n)}coalesce(){return f.coalesce(this)}static async toPromise(t){const n=[];for await(const r of t)n.push(r);return n}toPromise(){return f.toPromise(this)}g(t){this.a===0&&(this.b.push(t),this.f.fire())}h(t){this.a===0&&(this.b=this.b.concat(t),this.f.fire())}j(){this.a===0&&(this.a=1,this.f.fire())}k(t){this.a===0&&(this.a=2,this.d=t,this.f.fire())}}e.$ih=f;class T extends f{constructor(t,n){super(n),this.l=t}cancel(){this.l.cancel()}}e.$jh=T;function z(c){const t=new C.$1d,n=c(t.token);return new T(t,async r=>{const l=t.token.onCancellationRequested(()=>{l.dispose(),t.dispose(),r.reject(new O.$4)});try{for await(const M of n){if(t.token.isCancellationRequested)return;r.emitOne(M)}l.dispose(),t.dispose()}catch(M){l.dispose(),t.dispose(),r.reject(M)}})}e.$kh=z;class W{constructor(){this.a=new v,this.b=new f(r=>{if(t){r.reject(t);return}return n&&r.emitMany(n),this.d=l=>r.reject(l),this.f=l=>r.emitOne(l),this.a.p});let t,n;this.f=r=>{n||(n=[]),n.push(r)},this.d=r=>{t||(t=r)}}get asyncIterable(){return this.b}resolve(){this.a.complete()}reject(t){this.d(t),this.a.complete()}emitOne(t){this.f(t)}}e.$lh=W}),define(ce[9],le([0,1,19,8,5,20,3,2,4]),function(te,e,C,O,A,w,b,E,S){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Fj=e.$Ej=e.$Dj=e.$Cj=e.$Bj=e.$Aj=e.$zj=e.$yj=e.$xj=e.$wj=void 0;function m(){return Object.create(null)}e.$wj=m,e.$xj="**",e.$yj="/";const $="[/\\\\]",L="[^/\\\\]",Z=/\//g;function D(a,d){switch(a){case 0:return"";case 1:return`${L}*?`;default:return`(?:${$}|${L}+${$}${d?`|${$}${L}+`:""})*?`}}function i(a,d){if(!a)return[];const o=[];let y=!1,v=!1,j="";for(const N of a){switch(N){case d:if(!y&&!v){o.push(j),j="";continue}break;case"{":y=!0;break;case"}":y=!1;break;case"[":v=!0;break;case"]":v=!1;break}j+=N}return j&&o.push(j),o}e.$zj=i;function u(a){if(!a)return"";let d="";const o=i(a,e.$yj);if(o.every(y=>y===e.$xj))d=".*";else{let y=!1;o.forEach((v,j)=>{if(v===e.$xj){if(y)return;d+=D(2,j===o.length-1)}else{let N=!1,f="",T=!1,z="";for(const W of v){if(W!=="}"&&N){f+=W;continue}if(T&&(W!=="]"||!z)){let c;W==="-"?c=W:(W==="^"||W==="!")&&!z?c="^":W===e.$yj?c="":c=(0,S.$Ie)(W),z+=c;continue}switch(W){case"{":N=!0;continue;case"[":T=!0;continue;case"}":{const t=`(?:${i(f,",").map(n=>u(n)).join("|")})`;d+=t,N=!1,f="";break}case"]":{d+="["+z+"]",T=!1,z="";break}case"?":d+=L;continue;case"*":d+=D(1);continue;default:d+=(0,S.$Ie)(W)}}j<o.length-1&&(o[j+1]!==e.$xj||j+2<o.length)&&(d+=$)}y=v===e.$xj})}return d}const g=/^\*\*\/\*\.[\w\.-]+$/,B=/^\*\*\/([\w\.-]+)\/?$/,V=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,P=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,K=/^\*\*((\/[\w\.-]+)+)\/?$/,ee=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,R=new w.$Cc(1e4),U=function(){return!1},I=function(){return null};function X(a,d){if(!a)return I;let o;typeof a!="string"?o=a.pattern:o=a,o=o.trim();const y=`${o}_${!!d.trimForExclusions}`;let v=R.get(y);if(v)return J(v,a);let j;return g.test(o)?v=h(o.substr(4),o):(j=B.exec(s(o,d)))?v=k(j[1],o):(d.trimForExclusions?P:V).test(o)?v=F(o,d):(j=K.exec(s(o,d)))?v=H(j[1].substr(1),o,!0):(j=ee.exec(s(o,d)))?v=H(j[1],o,!1):v=q(o),R.set(y,v),J(v,a)}function J(a,d){if(typeof d=="string")return a;const o=function(y,v){return(0,A.$1f)(y,d.base,!E.$k)?a((0,S.$Me)(y.substr(d.base.length),b.sep),v):null};return o.allBasenames=a.allBasenames,o.allPaths=a.allPaths,o.basenames=a.basenames,o.patterns=a.patterns,o}function s(a,d){return d.trimForExclusions&&a.endsWith("/**")?a.substr(0,a.length-2):a}function h(a,d){return function(o,y){return typeof o=="string"&&o.endsWith(a)?d:null}}function k(a,d){const o=`/${a}`,y=`\\${a}`,v=function(N,f){return typeof N!="string"?null:f?f===a?d:null:N===a||N.endsWith(o)||N.endsWith(y)?d:null},j=[a];return v.basenames=j,v.patterns=[d],v.allBasenames=j,v}function F(a,d){const o=Y(a.slice(1,-1).split(",").map(f=>X(f,d)).filter(f=>f!==I),a),y=o.length;if(!y)return I;if(y===1)return o[0];const v=function(f,T){for(let z=0,W=o.length;z<W;z++)if(o[z](f,T))return a;return null},j=o.find(f=>!!f.allBasenames);j&&(v.allBasenames=j.allBasenames);const N=o.reduce((f,T)=>T.allPaths?f.concat(T.allPaths):f,[]);return N.length&&(v.allPaths=N),v}function H(a,d,o){const y=b.sep===b.$fc.sep,v=y?a:a.replace(Z,b.sep),j=b.sep+v,N=b.$fc.sep+a;let f;return o?f=function(T,z){return typeof T=="string"&&(T===v||T.endsWith(j)||!y&&(T===a||T.endsWith(N)))?d:null}:f=function(T,z){return typeof T=="string"&&(T===v||!y&&T===a)?d:null},f.allPaths=[(o?"*/":"./")+a],f}function q(a){try{const d=new RegExp(`^${u(a)}$`);return function(o){return d.lastIndex=0,typeof o=="string"&&d.test(o)?a:null}}catch{return I}}function G(a,d,o){return!a||typeof d!="string"?!1:re(a)(d,void 0,o)}e.$Aj=G;function re(a,d={}){if(!a)return U;if(typeof a=="string"||ne(a)){const o=X(a,d);if(o===I)return U;const y=function(v,j){return!!o(v,j)};return o.allBasenames&&(y.allBasenames=o.allBasenames),o.allPaths&&(y.allPaths=o.allPaths),y}return Q(a,d)}e.$Bj=re;function ne(a){const d=a;return d?typeof d.base=="string"&&typeof d.pattern=="string":!1}e.$Cj=ne;function x(a){return a.allBasenames||[]}e.$Dj=x;function oe(a){return a.allPaths||[]}e.$Ej=oe;function Q(a,d){const o=Y(Object.getOwnPropertyNames(a).map(f=>p(f,a[f],d)).filter(f=>f!==I)),y=o.length;if(!y)return I;if(!o.some(f=>!!f.requiresSiblings)){if(y===1)return o[0];const f=function(W,c){let t;for(let n=0,r=o.length;n<r;n++){const l=o[n](W,c);if(typeof l=="string")return l;(0,O.$Jg)(l)&&(t||(t=[]),t.push(l))}return t?(async()=>{for(const n of t){const r=await n;if(typeof r=="string")return r}return null})():null},T=o.find(W=>!!W.allBasenames);T&&(f.allBasenames=T.allBasenames);const z=o.reduce((W,c)=>c.allPaths?W.concat(c.allPaths):W,[]);return z.length&&(f.allPaths=z),f}const v=function(f,T,z){let W,c;for(let t=0,n=o.length;t<n;t++){const r=o[t];r.requiresSiblings&&z&&(T||(T=(0,b.$mc)(f)),W||(W=T.substr(0,T.length-(0,b.$nc)(f).length)));const l=r(f,T,W,z);if(typeof l=="string")return l;(0,O.$Jg)(l)&&(c||(c=[]),c.push(l))}return c?(async()=>{for(const t of c){const n=await t;if(typeof n=="string")return n}return null})():null},j=o.find(f=>!!f.allBasenames);j&&(v.allBasenames=j.allBasenames);const N=o.reduce((f,T)=>T.allPaths?f.concat(T.allPaths):f,[]);return N.length&&(v.allPaths=N),v}function p(a,d,o){if(d===!1)return I;const y=X(a,o);if(y===I)return I;if(typeof d=="boolean")return y;if(d){const v=d.when;if(typeof v=="string"){const j=(N,f,T,z)=>{if(!z||!y(N,f))return null;const W=v.replace("$(basename)",()=>T),c=z(W);return(0,O.$Jg)(c)?c.then(t=>t?a:null):c?a:null};return j.requiresSiblings=!0,j}}return y}function Y(a,d){const o=a.filter(f=>!!f.basenames);if(o.length<2)return a;const y=o.reduce((f,T)=>{const z=T.basenames;return z?f.concat(z):f},[]);let v;if(d){v=[];for(let f=0,T=y.length;f<T;f++)v.push(d)}else v=o.reduce((f,T)=>{const z=T.patterns;return z?f.concat(z):f},[]);const j=function(f,T){if(typeof f!="string")return null;if(!T){let W;for(W=f.length;W>0;W--){const c=f.charCodeAt(W-1);if(c===47||c===92)break}T=f.substr(W)}const z=y.indexOf(T);return z!==-1?v[z]:null};j.basenames=y,j.patterns=v,j.allBasenames=y;const N=a.filter(f=>!f.basenames);return N.push(j),N}function ie(a,d){return(0,C.$tb)(a,d,(o,y)=>typeof o=="string"&&typeof y=="string"?o===y:typeof o!="string"&&typeof y!="string"?o.base===y.base&&o.pattern===y.pattern:!1)}e.$Fj=ie}),define(ce[14],le([0,1,21]),function(te,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Pic=void 0;const O=(A,w,b)=>{let E;if(A[0]===255&&A[1]===254)E=new TextDecoder("utf-16le").decode(A);else if(A[0]===254&&A[1]===255)E=new TextDecoder("utf-16be").decode(A);else if(E=new TextDecoder("utf8").decode(A),E.slice(0,1e3).includes("\uFFFD")&&A.includes(0))return[];const S=[],m=[];let $=null,L=b.remainingResultQuota;for(;L>=0&&($=w.exec(E));)m.push({matchStartIndex:$.index,matchedText:$[0]}),L--;if(m.length){const Z=new Set,D=new Set,i=[],u=K=>E.slice(i[K].start,i[K].end);let g=0,B=null;const V=/\r?\n/g;for(;B=V.exec(E);)i.push({start:g,end:B.index}),g=B.index+B[0].length;g<E.length&&i.push({start:g,end:E.length});let P=0;for(const{matchStartIndex:K,matchedText:ee}of m){if(L<0)break;for(;i[P+1]&&K>i[P].end;)P++;let R=P;for(;i[R+1]&&K+ee.length>i[R].end;)R++;if(b.beforeContext)for(let h=Math.max(0,P-b.beforeContext);h<P;h++)Z.add(h);let U="",I=0;for(let h=P;h<=R;h++){let k=u(h);b.previewOptions?.charsPerLine&&k.length>b.previewOptions.charsPerLine&&(I=Math.max(K-i[P].start-20,0),k=k.substr(I,b.previewOptions.charsPerLine)),U+=`${k}
`,D.add(h)}const X=new C.$zs(P,K-i[P].start,R,K+ee.length-i[R].start),J=new C.$zs(0,K-i[P].start-I,R-P,K+ee.length-i[R].start-(R===P?I:0)),s={ranges:X,preview:{text:U,matches:J}};if(S.push(s),b.afterContext)for(let h=R+1;h<=Math.min(R+b.afterContext,i.length-1);h++)Z.add(h)}for(const K of Z)D.has(K)||S.push({text:u(K),lineNumber:K+1})}return S};e.$Pic=O}),define(ce[15],le([0,1,9]),function(te,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$rpb=void 0;class O{constructor(w,b,E){if(this.b=b,this.c=E,b[b.length-1]==="\\")throw Error("Unexpected path format, do not use trailing backslashes");b[b.length-1]!=="/"&&(b+="/"),this.a=this.e(w,this.b,this.c)}updateContents(w){this.a=this.e(w,this.b,this.c)}isPathIncludedInTraversal(w,b){if(w[0]!=="/"||w[w.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+w);return!this.a(w,b)}isArbitraryPathIgnored(w,b){if(w[0]!=="/"||w[w.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+w);const E=w.split("/").filter($=>$);let S=!1,m="";for(let $=0;$<E.length;$++){const L=$===E.length-1,Z=E[$];if(m=m+"/"+Z,!this.isPathIncludedInTraversal(m,L?b:!0)){S=!0;break}}return S}d(w,b,E){const S=w.map($=>this.f($,b)),m=Object.create(null);for(const $ of S)m[$]=!0;return C.$Bj(m,{trimForExclusions:E})}e(w,b,E){const S=w.split(`
`).map(P=>P.trim()).filter(P=>P&&P[0]!=="#"),m=S.filter(P=>!P.endsWith("/")),$=m.filter(P=>!P.includes("!")),L=this.d($,b,!0),Z=m.filter(P=>P.includes("!")).map(P=>P.replace(/!/g,"")),D=this.d(Z,b,!1),i=S.filter(P=>!P.includes("!")),u=this.d(i,b,!0),g=S.filter(P=>P.includes("!")).map(P=>P.replace(/!/g,"")),B=this.d(g,b,!1);return(P,K)=>P.startsWith(b)?K&&u(P)&&!B(P)||L(P)&&!D(P)?!0:E?E.a(P,K):!1:!1}f(w,b){const E=w.indexOf("/");return E===-1||E===w.length-1?w="**/"+w:(E===0?b.slice(-1)==="/"&&(w=w.slice(1)):b.slice(-1)!=="/"&&(w="/"+w),w=b+w),w}}e.$rpb=O}),define(ce[22],le([0,1,9,6,3,13,14,15,4,8,7]),function(te,e,C,O,A,w,b,E,S,m,$){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LocalFileSearchSimpleWorker=e.create=void 0;const L=!1,Z=+new Date,D={},i=async(R,U)=>{if(!L)return U();const I=Date.now(),X=(D[R]??0)+1;console.info(R,X,"starting",Math.round((I-Z)*10)/1e4),D[R]=X;const J=await U(),s=Date.now();return console.info(R,X,"took",s-I),J};function u(R){return new g(R)}e.create=u;class g{constructor(U){this.d=U,this.cancellationTokens=new Map}cancelQuery(U){this.cancellationTokens.get(U)?.cancel()}g(U){const I=new w.$1d;return this.cancellationTokens.set(U,I),I}async listDirectory(U,I,X,J,s){const h=V(X),k=new $.$ng(()=>J),F=this.g(s),H=[];let q=!1,G=0;const re=I.maxResults||512,ne=I.filePattern?x=>I.filePattern.split("").every(oe=>x.includes(oe)):x=>!0;return await i("listDirectory",()=>this.h(U,P(I),h,k,x=>{if(ne(x.name))return G++,re&&G>re&&(q=!0,F.cancel()),H.push(x.path)},F.token)),{results:H,limitHit:q}}async searchDirectory(U,I,X,J,s){const h=V(X),k=new $.$ng(()=>J);return i("searchInFiles",async()=>{const F=this.g(s),H=[],q=B(I.contentPattern),G=[];let re=0,ne=0;const x=!1,oe=async Q=>{if(F.token.isCancellationRequested)return;re++;const p=await Q.resolve();if(F.token.isCancellationRequested)return;const Y=new Uint8Array(p),ie=(0,b.$Pic)(Y,q,{afterContext:I.afterContext??0,beforeContext:I.beforeContext??0,previewOptions:I.previewOptions,remainingResultQuota:I.maxResults?I.maxResults-ne:1e4});if(ie.length){ne+=ie.length,I.maxResults&&ne>I.maxResults&&F.cancel();const a={resource:O.URI.joinPath(h.folder,Q.path),results:ie};this.d.sendTextSearchMatch(a,s),H.push(a)}};return await i("walkFolderToResolve",()=>this.h(U,P(I),h,k,async Q=>G.push(oe(Q)),F.token)),await i("resolveOngoingProcesses",()=>Promise.all(G)),L&&console.log("Searched in",re,"files"),{results:H,limitHit:x}})}async h(U,I,X,J,s,h){const k=C.$Bj(X.excludePattern??{},{trimForExclusions:!0}),F=(Q,p,Y)=>(Q=Q.slice(1),!!(k(Q,p,Y)||K(I,Q))),H=(Q,p,Y)=>(Q=Q.slice(1),!(k(Q,p,Y)||!ee(I,Q,J))),q=(Q,p)=>({type:"file",name:Q.name,path:p,resolve:()=>Q.getFile().then(ie=>ie.arrayBuffer())}),G=Q=>Q.kind==="directory",re=Q=>Q.kind==="file",ne=async(Q,p,Y)=>{if(!X.disregardIgnoreFiles){const a=await Promise.all([Q.getFileHandle(".gitignore").catch(d=>{}),Q.getFileHandle(".ignore").catch(d=>{})]);await Promise.all(a.map(async d=>{if(!d)return;const o=new TextDecoder("utf8").decode(new Uint8Array(await(await d.getFile()).arrayBuffer()));Y=new E.$rpb(o,p,Y)}))}const ie=m.Promises.withAsyncBody(async a=>{const d=[],o=[],y=[],v=new Set;for await(const j of Q.entries())y.push(j),v.add(j[0]);for(const[j,N]of y){if(h.isCancellationRequested)break;const f=p+j;if(Y&&!Y.isPathIncludedInTraversal(f,N.kind==="directory"))continue;const T=z=>v.has(z);G(N)&&!F(f,j,T)?o.push(ne(N,f+"/",Y)):re(N)&&H(f,j,T)&&d.push(q(N,f))}a([...await Promise.all(o),...d])});return{type:"dir",name:Q.name,entries:ie}},x=async(Q,p)=>{h.isCancellationRequested||await Promise.all((await Q.entries).sort((Y,ie)=>-(Y.type==="dir"?0:1)+(ie.type==="dir"?0:1)).map(async Y=>Y.type==="dir"?x(Y,p):p(Y)))},oe=await i("process",()=>ne(U,"/"));await i("resolve",()=>x(oe,s))}}e.LocalFileSearchSimpleWorker=g;function B(R){return(0,S.$Qe)(R.pattern,!!R.isRegExp,{wholeWord:R.isWordMatch,global:!0,matchCase:R.isCaseSensitive,multiline:!0,unicode:!0})}function V(R){return{...R,folder:O.URI.revive(R.folder)}}function P(R){return{...R,extraFileResources:R.extraFileResources?.map(U=>O.URI.revive(U)),folderQueries:R.folderQueries.map(U=>V(U))}}function K(R,U){return!!(R.excludePattern&&C.$Aj(R.excludePattern,U))}function ee(R,U,I){return R.excludePattern&&C.$Aj(R.excludePattern,U)?!1:R.includePattern||R.usingSearchPaths?R.includePattern&&C.$Aj(R.includePattern,U)?!0:R.usingSearchPaths?!!R.folderQueries&&R.folderQueries.some(X=>{const J=X.folder,s=O.URI.file(U);if(I.isEqualOrParent(s,J)){const h=A.$kc(J.path,s.path);return!X.includePattern||!!C.$Aj(X.includePattern,h)}else return!1}):!1:!0}})}).call(this);

//# sourceMappingURL=https://ticino.blob.core.windows.net/sourcemaps/2095b6f5a316c998fbfa17586d24f7974e3c8f13/core/vs/workbench/services/search/worker/localFileSearch.js.map
